# ~/beautybot/app/handlers/start.py
from aiogram import Router, types
from aiogram.filters import CommandStart
from app.keyboards.main_kb import get_main_kb
from app.utils.db import add_user, get_client_points

router = Router()

@router.message(CommandStart())
async def cmd_start(message: types.Message):
    user_id = message.from_user.id
    username = message.from_user.username or message.from_user.full_name or "ĞšĞ»Ğ¸ĞµĞ½Ñ‚"
    await add_user(user_id, username)
    points = await get_client_points(user_id)
    await message.answer(
        f"ğŸ‘‹ ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, {username}!\n\nğŸ’ Ğ£ Ñ‚ĞµĞ±Ñ {points} Ğ±Ğ¾Ğ½ÑƒÑĞ½Ñ‹Ñ… Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ².",
        reply_markup=get_main_kb()
    )
